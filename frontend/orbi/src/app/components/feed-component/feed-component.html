<!-- 
  Container principal do feed, com rolagem interna e um padding 
  para não colar no header/sidebar.
  O fundo é cinza escuro, ligeiramente mais claro que o menu lateral.
-->
<main class="h-full overflow-y-auto bg-gray-900 text-gray-200 p-4 md:p-6 lg:p-8 space-y-6">

  <!-- [INÍCIO] Card Fixado (simulando o "Lessons #2") -->
  <div class="bg-gray-800 rounded-lg p-4 flex justify-between items-center gap-4 border border-gray-700">
    <div class="flex-1">
      <div class="flex items-center gap-2 mb-1">
        <!-- Ícone de Pin -->
        <svg class="w-4 h-4 text-green-400" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
        <span class="text-xs text-gray-400 uppercase">Fixado pela comunidade</span>
      </div>
      <h3 class="font-semibold text-lg text-white hover:underline cursor-pointer">
        {{ pinnedPost.title }}
      </h3>
      <div class="flex items-center gap-4 text-sm text-gray-400 mt-2">
        <span>{{ pinnedPost.votes }} votos</span>
        <span>{{ pinnedPost.comments }} comentários</span>
      </div>
    </div>
    <!-- Thumbnail -->
    <img [src]="pinnedPost.imageUrl" 
         alt="Thumbnail" 
         onerror="this.src='https://placehold.co/100x70/334155/e2e8f0?text=Erro'"
         class="w-24 h-auto object-cover rounded-md bg-gray-700 hidden sm:block">
  </div>
  <!-- [FIM] Card Fixado -->


  <!-- [INÍCIO] Barra de Filtros (Popular, Novo, etc.) -->
  <div class="bg-gray-800 rounded-lg p-3 flex items-center gap-4 border border-gray-700">
    <button class="flex items-center gap-2 px-3 py-2 rounded-full bg-gray-700 hover:bg-gray-600 transition text-white">
      <!-- Ícone Fogo (Popular) -->
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 18.657A8 8 0 016.343 7.343m11.314 11.314a8 8 0 00-11.314-11.314m11.314 11.314L6.343 7.343"></path></svg>
      <span>Popular</span>
    </button>
    <button class="flex items-center gap-2 px-3 py-2 rounded-full hover:bg-gray-700 transition text-gray-400">
      <!-- Ícone Novo -->
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16v4m-2-2h4m6 17v4m-2-2h4M12 3v4m-2-2h4m-4 7h.01M12 17v4m-2-2h4"></path></svg>
      <span>Novo</span>
    </button>
    <button class="flex items-center gap-2 px-3 py-2 rounded-full hover:bg-gray-700 transition text-gray-400">
      <!-- Ícone Top -->
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18"></path></svg>
      <span>Top</span>
    </button>
  </div>
  <!-- [FIM] Barra de Filtros -->


  <!-- [INÍCIO] Loop dos Posts -->
  <div class="space-y-4">
    <article *ngFor="let post of posts" 
             class="bg-gray-800 rounded-lg border border-gray-700 flex hover:border-gray-600 transition-colors duration-200">
      
      <!-- Seção de Votos (Esquerda) -->
      <div class="flex flex-col items-center p-2 sm:p-3 bg-gray-800/50 rounded-l-lg">
        <button class="p-1 rounded hover:bg-gray-700 text-gray-400 hover:text-orange-500 transition">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg>
        </button>
        <span class="text-sm font-bold my-1 text-white">{{ formatVotes(post.upvotes) }}</span>
        <button class="p-1 rounded hover:bg-gray-700 text-gray-400 hover:text-blue-500 transition">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
        </button>
      </div>

      <!-- Conteúdo do Post (Direita) -->
      <div class="flex-1 p-3 sm:p-4">
        <!-- Metadados do Post -->
        <div class="flex items-center gap-2 text-sm mb-2">
          <img [src]="post.communityIcon" 
               alt="Icone"
               onerror="this.src='https://placehold.co/24x24/7c3aed/white?text=?'"
               class="w-6 h-6 rounded-full bg-gray-700">
          <span class="font-semibold text-white hover:underline cursor-pointer">{{ post.community }}</span>
          <span class="text-gray-400">·</span>
          <span class="text-gray-400">Postado por {{ post.author }}</span>
          <span class="text-gray-400">{{ post.time }}</span>
        </div>

        <!-- Título e Flair -->
        <div class="flex items-center gap-2 mb-2">
           <h2 class="text-lg sm:text-xl font-semibold text-white hover:underline cursor-pointer">
            {{ post.title }}
          </h2>
          <span *ngIf="post.flair" 
                class="text-xs font-medium px-2 py-0.5 rounded-full bg-indigo-600 text-indigo-100 whitespace-nowrap">
            {{ post.flair }}
          </span>
        </div>
       

        <!-- Conteúdo (truncado) -->
        <div class="text-gray-300 text-sm max-h-32 overflow-hidden relative">
          <p>{{ post.content }}</p>
          <!-- Gradiente para indicar que o texto continua -->
          <div class="absolute bottom-0 left-0 w-full h-12 bg-gradient-to-t from-gray-800 to-transparent"></div>
        </div>

        <!-- Ações (Comentários, Compartilhar) -->
        <div class="flex items-center gap-4 mt-4 text-sm font-medium">
          <button class="flex items-center gap-1.5 px-3 py-2 rounded-full hover:bg-gray-700 text-gray-400 transition">
            <!-- Ícone Comentário -->
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 5.523-4.477 10-10 10S1 17.523 1 12 5.477 2 11 2s10 4.477 10 10z"></path></svg>
            <span>{{ post.comments }} Comentários</span>
          </button>
          <button class="flex items-center gap-1.5 px-3 py-2 rounded-full hover:bg-gray-700 text-gray-400 transition">
            <!-- Ícone Compartilhar -->
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12s-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6.002l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"></path></svg>
            <span>Compartilhar</span>
          </button>
        </div>
      </div>
    </article>
  </div>
  <!-- [FIM] Loop dos Posts -->

</main>
